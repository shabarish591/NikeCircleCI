machine:
  timezone: Asia/Tokyo

python:
    version:2.7
    
cache:
  directories:
    - functions
    - node_modules

test:
  override:
    - echo "No tests"

  environment:
    AWS_REGION: us-west-2
    AWS_PROFILE: shabarish

dependencies:
  pre:
   - pip install -r requirements.txt

post:
    - bash ${CIRCLE_PROJECT_REPONAME}/circleci_env
    - bash ${CIRCLE_PROJECT_REPONAME}/aws_init
 
deployment:
  production:
    branch: master
    commands:
      - chmod u+x serverless.sh
      - /bin/bash ./serverless.sh
